{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CheckoutComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"div\", 27)(2, \"div\", 28);\n    i0.ɵɵelement(3, \"img\", 29);\n    i0.ɵɵelementStart(4, \"div\")(5, \"h6\", 30);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 31)(8, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.decreaseQuantity(item_r1));\n    });\n    i0.ɵɵelement(9, \"i\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 34);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.increaseQuantity(item_r1));\n    });\n    i0.ɵɵelement(13, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.removeFromCart(item_r1));\n    });\n    i0.ɵɵelement(15, \"i\", 37);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"span\", 38);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"alt\", item_r1.name);\n    i0.ɵɵproperty(\"src\", item_r1.image_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r1.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(item_r1.quantity);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"$\", item_r1.price * item_r1.quantity, \"\");\n  }\n}\nlet CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(apiService, router, cartService) {\n      this.apiService = apiService;\n      this.router = router;\n      this.cartService = cartService;\n      this.userId = 1; // Hardcoded user ID for demo purposes (assuming user is logged in)\n      this.cartItems = [];\n      this.total = 0;\n    }\n    ngOnInit() {\n      this.cartItems = this.cartService.getCartItems();\n      this.calculateTotal();\n    }\n    calculateTotal() {\n      this.total = this.cartService.getTotal();\n    }\n    increaseQuantity(item) {\n      this.cartService.updateQuantity(item.id, item.quantity + 1);\n      this.calculateTotal();\n    }\n    decreaseQuantity(item) {\n      if (item.quantity > 1) {\n        this.cartService.updateQuantity(item.id, item.quantity - 1);\n      } else {\n        this.removeFromCart(item);\n      }\n      this.calculateTotal();\n    }\n    removeFromCart(item) {\n      if (confirm('¿Estás segura de que quieres eliminar este artículo?')) {\n        this.cartService.removeFromCart(item.id);\n        this.cartItems = this.cartService.getCartItems(); // Refresh local list\n        this.calculateTotal();\n      }\n    }\n    onSubmit() {\n      const orderData = {\n        userId: this.userId,\n        items: this.cartItems,\n        total: this.total\n      };\n      this.apiService.createOrder(orderData).subscribe(response => {\n        alert('¡Pedido realizado con éxito! ID: ' + response.orderId);\n        this.cartItems = [];\n        this.total = 0;\n        this.router.navigate(['/']);\n      }, error => {\n        console.error(error);\n        alert('Error al procesar el pedido.');\n      });\n    }\n    static {\n      this.ɵfac = function CheckoutComponent_Factory(t) {\n        return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CartService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CheckoutComponent,\n        selectors: [[\"app-checkout\"]],\n        decls: 45,\n        vars: 2,\n        consts: [[1, \"container\", \"my-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-lg-8\"], [1, \"mb-4\", \"fw-bold\", \"gradient-text\"], [1, \"checkout-card\", \"card\", \"border-0\", \"shadow-lg\", \"mb-4\"], [1, \"card-body\", \"p-4\"], [1, \"fw-bold\", \"mb-4\"], [1, \"order-items\"], [\"class\", \"order-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"total-section\", \"mt-4\", \"pt-4\", \"border-top\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"fw-bold\"], [1, \"price-total\"], [1, \"checkout-card\", \"card\", \"border-0\", \"shadow-lg\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\", \"fw-semibold\"], [\"type\", \"text\", \"placeholder\", \"Ej: Mar\\u00EDa Garc\\u00EDa\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"Calle, n\\u00FAmero, colonia\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [1, \"row\"], [1, \"col-md-6\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Ciudad\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"12345\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [1, \"mb-4\"], [\"type\", \"tel\", \"placeholder\", \"(123) 456-7890\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"w-100\"], [1, \"order-item\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\", \"pb-3\", \"border-bottom\"], [1, \"d-flex\", \"align-items-center\", \"gap-3\"], [1, \"rounded\", 2, \"width\", \"60px\", \"height\", \"60px\", \"object-fit\", \"cover\", 3, \"src\", \"alt\"], [1, \"mb-1\", \"fw-bold\"], [1, \"d-flex\", \"align-items-center\", \"gap-2\", \"mt-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"rounded-circle\", 3, \"click\"], [1, \"fas\", \"fa-minus\"], [1, \"fw-bold\", \"mx-2\"], [1, \"fas\", \"fa-plus\"], [\"type\", \"button\", \"title\", \"Eliminar\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"ms-3\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"fw-bold\", \"fs-5\", \"text-primary\"]],\n        template: function CheckoutComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n            i0.ɵɵtext(4, \"Finalizar Compra\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"h5\", 6);\n            i0.ɵɵtext(8, \"Resumen del Pedido\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 7);\n            i0.ɵɵtemplate(10, CheckoutComponent_div_10_Template, 18, 5, \"div\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 9)(12, \"div\", 10)(13, \"h4\", 11);\n            i0.ɵɵtext(14, \"Total:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"h3\", 12);\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(17, \"div\", 13)(18, \"div\", 5)(19, \"h5\", 6);\n            i0.ɵɵtext(20, \"Informaci\\u00F3n de Env\\u00EDo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"form\", 14);\n            i0.ɵɵlistener(\"ngSubmit\", function CheckoutComponent_Template_form_ngSubmit_21_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(22, \"div\", 15)(23, \"label\", 16);\n            i0.ɵɵtext(24, \"Nombre Completo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(25, \"input\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"div\", 15)(27, \"label\", 16);\n            i0.ɵɵtext(28, \"Direcci\\u00F3n\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(29, \"input\", 18);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"div\", 19)(31, \"div\", 20)(32, \"label\", 16);\n            i0.ɵɵtext(33, \"Ciudad\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(34, \"input\", 21);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"div\", 20)(36, \"label\", 16);\n            i0.ɵɵtext(37, \"C\\u00F3digo Postal\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(38, \"input\", 22);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(39, \"div\", 23)(40, \"label\", 16);\n            i0.ɵɵtext(41, \"Tel\\u00E9fono\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(42, \"input\", 24);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"button\", 25);\n            i0.ɵɵtext(44, \" Confirmar Pedido \");\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"ngForOf\", ctx.cartItems);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"$\", ctx.total, \"\");\n          }\n        },\n        dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm],\n        styles: [\".checkout-card[_ngcontent-%COMP%]{border-radius:1rem;transition:all .3s ease;animation:fadeIn .6s ease-out}.checkout-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #8b5cf633!important}.order-item[_ngcontent-%COMP%]{transition:all .3s ease}.order-item[_ngcontent-%COMP%]:hover{background:var(--light);padding:.5rem;border-radius:.5rem}.price-total[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;background:var(--gradient-primary);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.form-label[_ngcontent-%COMP%]{color:var(--dark);margin-bottom:.5rem}.form-control-lg[_ngcontent-%COMP%]{border:2px solid var(--light-dark);border-radius:.5rem;padding:.75rem 1rem;transition:all .3s ease}.form-control-lg[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #8b5cf640;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-primary[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.3);transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn-primary[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}@media (max-width: 768px){.price-total[_ngcontent-%COMP%]{font-size:2rem}}\"]\n      });\n    }\n  }\n  return CheckoutComponent;\n})();\nexport { CheckoutComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}