{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CheckoutComponent = class CheckoutComponent {\n  constructor(apiService, router, cartService) {\n    this.apiService = apiService;\n    this.router = router;\n    this.cartService = cartService;\n    this.userId = 1; // Hardcoded user ID for demo purposes (assuming user is logged in)\n    this.cartItems = [];\n    this.total = 0;\n  }\n  ngOnInit() {\n    this.cartItems = this.cartService.getCartItems();\n    this.calculateTotal();\n  }\n  calculateTotal() {\n    this.total = this.cartService.getTotal();\n  }\n  updateQuantity(item, event) {\n    const newQuantity = parseInt(event.target.value, 10);\n    if (newQuantity > 0) {\n      this.cartService.updateQuantity(item.id, newQuantity);\n    } else {\n      this.removeFromCart(item);\n    }\n    this.calculateTotal();\n  }\n  increaseQuantity(item) {\n    this.cartService.updateQuantity(item.id, item.quantity + 1);\n    this.calculateTotal();\n  }\n  decreaseQuantity(item) {\n    if (item.quantity > 1) {\n      this.cartService.updateQuantity(item.id, item.quantity - 1);\n    } else {\n      this.removeFromCart(item);\n    }\n    this.calculateTotal();\n  }\n  removeFromCart(item) {\n    if (confirm('¿Estás segura de que quieres eliminar este artículo?')) {\n      this.cartService.removeFromCart(item.id);\n      this.cartItems = this.cartService.getCartItems(); // Refresh local list\n      this.calculateTotal();\n    }\n  }\n  onSubmit() {\n    const orderData = {\n      userId: this.userId,\n      items: this.cartItems,\n      total: this.total\n    };\n    this.apiService.createOrder(orderData).subscribe(response => {\n      alert('¡Pedido realizado con éxito! ID: ' + response.orderId);\n      this.cartItems = [];\n      this.total = 0;\n      this.router.navigate(['/']);\n    }, error => {\n      console.error(error);\n      alert('Error al procesar el pedido.');\n    });\n  }\n};\nCheckoutComponent = __decorate([Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})], CheckoutComponent);\nexport { CheckoutComponent };","map":{"version":3,"names":["Component","CheckoutComponent","constructor","apiService","router","cartService","userId","cartItems","total","ngOnInit","getCartItems","calculateTotal","getTotal","updateQuantity","item","event","newQuantity","parseInt","target","value","id","removeFromCart","increaseQuantity","quantity","decreaseQuantity","confirm","onSubmit","orderData","items","createOrder","subscribe","response","alert","orderId","navigate","error","console","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Usuario de Windows\\OneDrive\\Documentos\\Uni la salle\\finalcris\\frontend\\src\\app\\components\\checkout\\checkout.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ApiService } from '../../services/api.service';\r\nimport { CartService } from '../../services/cart.service';\r\n\r\n@Component({\r\n    selector: 'app-checkout',\r\n    templateUrl: './checkout.component.html',\r\n    styleUrls: ['./checkout.component.css']\r\n})\r\nexport class CheckoutComponent implements OnInit {\r\n    userId = 1; // Hardcoded user ID for demo purposes (assuming user is logged in)\r\n    cartItems: any[] = [];\r\n    total = 0;\r\n\r\n    constructor(private apiService: ApiService, private router: Router, private cartService: CartService) { }\r\n\r\n    ngOnInit(): void {\r\n        this.cartItems = this.cartService.getCartItems();\r\n        this.calculateTotal();\r\n    }\r\n\r\n    calculateTotal() {\r\n        this.total = this.cartService.getTotal();\r\n    }\r\n\r\n    updateQuantity(item: any, event: any) {\r\n        const newQuantity = parseInt(event.target.value, 10);\r\n        if (newQuantity > 0) {\r\n            this.cartService.updateQuantity(item.id, newQuantity);\r\n        } else {\r\n            this.removeFromCart(item);\r\n        }\r\n        this.calculateTotal();\r\n    }\r\n\r\n    increaseQuantity(item: any) {\r\n        this.cartService.updateQuantity(item.id, item.quantity + 1);\r\n        this.calculateTotal();\r\n    }\r\n\r\n    decreaseQuantity(item: any) {\r\n        if (item.quantity > 1) {\r\n            this.cartService.updateQuantity(item.id, item.quantity - 1);\r\n        } else {\r\n            this.removeFromCart(item);\r\n        }\r\n        this.calculateTotal();\r\n    }\r\n\r\n    removeFromCart(item: any) {\r\n        if (confirm('¿Estás segura de que quieres eliminar este artículo?')) {\r\n            this.cartService.removeFromCart(item.id);\r\n            this.cartItems = this.cartService.getCartItems(); // Refresh local list\r\n            this.calculateTotal();\r\n        }\r\n    }\r\n\r\n    onSubmit() {\r\n        const orderData = {\r\n            userId: this.userId,\r\n            items: this.cartItems,\r\n            total: this.total\r\n        };\r\n\r\n        this.apiService.createOrder(orderData).subscribe(\r\n            (response) => {\r\n                alert('¡Pedido realizado con éxito! ID: ' + response.orderId);\r\n                this.cartItems = [];\r\n                this.total = 0;\r\n                this.router.navigate(['/']);\r\n            },\r\n            (error) => {\r\n                console.error(error);\r\n                alert('Error al procesar el pedido.');\r\n            }\r\n        );\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}