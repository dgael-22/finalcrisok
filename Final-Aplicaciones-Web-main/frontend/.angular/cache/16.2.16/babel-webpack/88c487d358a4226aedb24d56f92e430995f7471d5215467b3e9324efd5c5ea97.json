{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CheckoutComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"i\", 23);\n    i0.ɵɵelementStart(2, \"h5\", 24);\n    i0.ɵɵtext(3, \"Tu carrito est\\u00E1 vac\\u00EDo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 19);\n    i0.ɵɵtext(5, \"\\u00A1Explora nuestro cat\\u00E1logo y encuentra tu vestido ideal!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"a\", 25);\n    i0.ɵɵtext(7, \" Seguir Comprando \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CheckoutComponent_div_10_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"div\", 34)(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 35)(6, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function CheckoutComponent_div_10_div_2_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(item_r3.quantity = $event);\n    })(\"change\", function CheckoutComponent_div_10_div_2_Template_input_change_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.updateQuantity(item_r3, $event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_div_2_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.removeFromCart(item_r3));\n    });\n    i0.ɵɵelement(11, \"i\", 39);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", item_r3.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $\", i0.ɵɵpipeBind2(9, 3, item_r3.price * item_r3.quantity, \"1.2-2\"), \" \");\n  }\n}\nfunction CheckoutComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 26);\n    i0.ɵɵtemplate(2, CheckoutComponent_div_10_div_2_Template, 12, 6, \"div\", 27);\n    i0.ɵɵelementStart(3, \"div\", 28)(4, \"div\", 29)(5, \"h4\", 30);\n    i0.ɵɵtext(6, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.cartItems);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"$\", ctx_r1.total, \"\");\n  }\n}\nclass CheckoutComponent {\n  constructor(apiService, router, cartService) {\n    this.apiService = apiService;\n    this.router = router;\n    this.cartService = cartService;\n    this.userId = 1; // Hardcoded user ID for demo purposes (assuming user is logged in)\n    this.cartItems = [];\n    this.total = 0;\n  }\n  ngOnInit() {\n    this.cartItems = this.cartService.getCartItems();\n    this.calculateTotal();\n  }\n  calculateTotal() {\n    this.total = this.cartService.getTotal();\n  }\n  updateQuantity(item, event) {\n    const newQuantity = parseInt(event.target.value, 10);\n    if (newQuantity > 0) {\n      this.cartService.updateQuantity(item.id, newQuantity);\n    } else {\n      this.removeFromCart(item);\n    }\n    this.calculateTotal();\n  }\n  increaseQuantity(item) {\n    this.cartService.updateQuantity(item.id, item.quantity + 1);\n    this.calculateTotal();\n  }\n  decreaseQuantity(item) {\n    if (item.quantity > 1) {\n      this.cartService.updateQuantity(item.id, item.quantity - 1);\n    } else {\n      this.removeFromCart(item);\n    }\n    this.calculateTotal();\n  }\n  removeFromCart(item) {\n    if (confirm('¿Estás segura de que quieres eliminar este artículo?')) {\n      this.cartService.removeFromCart(item.id);\n      this.cartItems = this.cartService.getCartItems(); // Refresh local list\n      this.calculateTotal();\n    }\n  }\n  onSubmit() {\n    const orderData = {\n      userId: this.userId,\n      items: this.cartItems,\n      total: this.total\n    };\n    this.apiService.createOrder(orderData).subscribe(response => {\n      alert('¡Pedido realizado con éxito! ID: ' + response.orderId);\n      this.cartItems = [];\n      this.total = 0;\n      this.router.navigate(['/']);\n    }, error => {\n      console.error(error);\n      alert('Error al procesar el pedido.');\n    });\n  }\n  static {\n    this.ɵfac = function CheckoutComponent_Factory(t) {\n      return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CartService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CheckoutComponent,\n      selectors: [[\"app-checkout\"]],\n      decls: 39,\n      vars: 2,\n      consts: [[1, \"container\", \"my-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-lg-8\"], [1, \"mb-4\", \"fw-bold\", \"gradient-text\"], [1, \"checkout-card\", \"card\", \"border-0\", \"shadow-lg\", \"mb-4\"], [1, \"card-body\", \"p-4\"], [1, \"fw-bold\", \"mb-4\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"checkout-card\", \"card\", \"border-0\", \"shadow-lg\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\", \"fw-semibold\"], [\"type\", \"text\", \"placeholder\", \"Ej: Mar\\u00EDa Garc\\u00EDa\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"Calle, n\\u00FAmero, colonia\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [1, \"row\"], [1, \"col-md-6\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Ciudad\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"12345\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [1, \"mb-4\"], [\"type\", \"tel\", \"placeholder\", \"(123) 456-7890\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"w-100\"], [1, \"text-center\", \"py-5\"], [1, \"fas\", \"fa-shopping-basket\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"text-muted\"], [\"routerLink\", \"/catalog\", 1, \"btn\", \"btn-primary\"], [1, \"order-items\"], [\"class\", \"order-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"total-section\", \"mt-4\", \"pt-4\", \"border-top\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"fw-bold\"], [1, \"price-total\"], [1, \"order-item\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"flex-grow-1\"], [1, \"mx-2\"], [\"type\", \"number\", \"min\", \"1\", 1, \"form-control\", 2, \"width\", \"60px\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"text-end\", 2, \"width\", \"80px\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"ms-2\", 3, \"click\"], [1, \"fas\", \"fa-trash-alt\"]],\n      template: function CheckoutComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n          i0.ɵɵtext(4, \"Finalizar Compra\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"h5\", 6);\n          i0.ɵɵtext(8, \"Resumen del Pedido\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, CheckoutComponent_div_9_Template, 8, 0, \"div\", 7);\n          i0.ɵɵtemplate(10, CheckoutComponent_div_10_Template, 9, 2, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 9)(12, \"div\", 5)(13, \"h5\", 6);\n          i0.ɵɵtext(14, \"Informaci\\u00F3n de Env\\u00EDo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"form\", 10);\n          i0.ɵɵlistener(\"ngSubmit\", function CheckoutComponent_Template_form_ngSubmit_15_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(16, \"div\", 11)(17, \"label\", 12);\n          i0.ɵɵtext(18, \"Nombre Completo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 11)(21, \"label\", 12);\n          i0.ɵɵtext(22, \"Direcci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 15)(25, \"div\", 16)(26, \"label\", 12);\n          i0.ɵɵtext(27, \"Ciudad\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(28, \"input\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"div\", 16)(30, \"label\", 12);\n          i0.ɵɵtext(31, \"C\\u00F3digo Postal\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(32, \"input\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"div\", 19)(34, \"label\", 12);\n          i0.ɵɵtext(35, \"Tel\\u00E9fono\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(36, \"input\", 20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"button\", 21);\n          i0.ɵɵtext(38, \" Confirmar Pedido \");\n          i0.ɵɵelementEnd()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.cartItems.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.cartItems.length > 0);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i2.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.MinValidator, i5.NgModel, i5.NgForm, i4.DecimalPipe],\n      styles: [\".checkout-card[_ngcontent-%COMP%] {\\n    border-radius: 1rem;\\n    transition: all 0.3s ease;\\n    animation: fadeIn 0.6s ease-out;\\n}\\n\\n.checkout-card[_ngcontent-%COMP%]:hover {\\n    transform: translateY(-5px);\\n    box-shadow: 0 20px 40px rgba(139, 92, 246, 0.2) !important;\\n}\\n\\n.order-item[_ngcontent-%COMP%] {\\n    transition: all 0.3s ease;\\n}\\n\\n.order-item[_ngcontent-%COMP%]:hover {\\n    background: var(--light);\\n    padding: 0.5rem;\\n    border-radius: 0.5rem;\\n}\\n\\n.price-total[_ngcontent-%COMP%] {\\n    font-size: 2.5rem;\\n    font-weight: 800;\\n    background: var(--gradient-primary);\\n    -webkit-background-clip: text;\\n    -webkit-text-fill-color: transparent;\\n    background-clip: text;\\n}\\n\\n.form-label[_ngcontent-%COMP%] {\\n    color: var(--dark);\\n    margin-bottom: 0.5rem;\\n}\\n\\n.form-control-lg[_ngcontent-%COMP%] {\\n    border: 2px solid var(--light-dark);\\n    border-radius: 0.5rem;\\n    padding: 0.75rem 1rem;\\n    transition: all 0.3s ease;\\n}\\n\\n.form-control-lg[_ngcontent-%COMP%]:focus {\\n    border-color: var(--primary);\\n    box-shadow: 0 0 0 0.2rem rgba(139, 92, 246, 0.25);\\n    transform: translateY(-2px);\\n}\\n\\n.btn-primary[_ngcontent-%COMP%] {\\n    position: relative;\\n    overflow: hidden;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]::before {\\n    content: '';\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    width: 0;\\n    height: 0;\\n    border-radius: 50%;\\n    background: rgba(255, 255, 255, 0.3);\\n    transform: translate(-50%, -50%);\\n    transition: width 0.6s, height 0.6s;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:hover::before {\\n    width: 300px;\\n    height: 300px;\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n    .price-total[_ngcontent-%COMP%] {\\n        font-size: 2rem;\\n    }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGVja291dC9jaGVja291dC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksbUJBQW1CO0lBQ25CLHlCQUF5QjtJQUN6QiwrQkFBK0I7QUFDbkM7O0FBRUE7SUFDSSwyQkFBMkI7SUFDM0IsMERBQTBEO0FBQzlEOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksd0JBQXdCO0lBQ3hCLGVBQWU7SUFDZixxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLG1DQUFtQztJQUNuQyw2QkFBNkI7SUFDN0Isb0NBQW9DO0lBQ3BDLHFCQUFxQjtBQUN6Qjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSxtQ0FBbUM7SUFDbkMscUJBQXFCO0lBQ3JCLHFCQUFxQjtJQUNyQix5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSw0QkFBNEI7SUFDNUIsaURBQWlEO0lBQ2pELDJCQUEyQjtBQUMvQjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLFFBQVE7SUFDUixTQUFTO0lBQ1QsUUFBUTtJQUNSLFNBQVM7SUFDVCxrQkFBa0I7SUFDbEIsb0NBQW9DO0lBQ3BDLGdDQUFnQztJQUNoQyxtQ0FBbUM7QUFDdkM7O0FBRUE7SUFDSSxZQUFZO0lBQ1osYUFBYTtBQUNqQjs7QUFFQSxlQUFlO0FBQ2Y7SUFDSTtRQUNJLGVBQWU7SUFDbkI7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5jaGVja291dC1jYXJkIHtcbiAgICBib3JkZXItcmFkaXVzOiAxcmVtO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gICAgYW5pbWF0aW9uOiBmYWRlSW4gMC42cyBlYXNlLW91dDtcbn1cblxuLmNoZWNrb3V0LWNhcmQ6aG92ZXIge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTtcbiAgICBib3gtc2hhZG93OiAwIDIwcHggNDBweCByZ2JhKDEzOSwgOTIsIDI0NiwgMC4yKSAhaW1wb3J0YW50O1xufVxuXG4ub3JkZXItaXRlbSB7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbn1cblxuLm9yZGVyLWl0ZW06aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xufVxuXG4ucHJpY2UtdG90YWwge1xuICAgIGZvbnQtc2l6ZTogMi41cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tZ3JhZGllbnQtcHJpbWFyeSk7XG4gICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7XG4gICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDtcbn1cblxuLmZvcm0tbGFiZWwge1xuICAgIGNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG59XG5cbi5mb3JtLWNvbnRyb2wtbGcge1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWxpZ2h0LWRhcmspO1xuICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcbiAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbn1cblxuLmZvcm0tY29udHJvbC1sZzpmb2N1cyB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAwLjJyZW0gcmdiYSgxMzksIDkyLCAyNDYsIDAuMjUpO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbn1cblxuLmJ0bi1wcmltYXJ5IHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLmJ0bi1wcmltYXJ5OjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgd2lkdGg6IDA7XG4gICAgaGVpZ2h0OiAwO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC42cywgaGVpZ2h0IDAuNnM7XG59XG5cbi5idG4tcHJpbWFyeTpob3Zlcjo6YmVmb3JlIHtcbiAgICB3aWR0aDogMzAwcHg7XG4gICAgaGVpZ2h0OiAzMDBweDtcbn1cblxuLyogUmVzcG9uc2l2ZSAqL1xuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgLnByaWNlLXRvdGFsIHtcbiAgICAgICAgZm9udC1zaXplOiAycmVtO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}\nexport { CheckoutComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","CheckoutComponent_div_10_div_2_Template_input_ngModelChange_6_listener","$event","restoredCtx","ɵɵrestoreView","_r5","item_r3","$implicit","ɵɵresetView","quantity","CheckoutComponent_div_10_div_2_Template_input_change_6_listener","ctx_r6","ɵɵnextContext","updateQuantity","CheckoutComponent_div_10_div_2_Template_button_click_10_listener","ctx_r7","removeFromCart","ɵɵadvance","ɵɵtextInterpolate","name","ɵɵproperty","ɵɵtextInterpolate1","ɵɵpipeBind2","price","ɵɵtemplate","CheckoutComponent_div_10_div_2_Template","ctx_r1","cartItems","total","CheckoutComponent","constructor","apiService","router","cartService","userId","ngOnInit","getCartItems","calculateTotal","getTotal","item","event","newQuantity","parseInt","target","value","id","increaseQuantity","decreaseQuantity","confirm","onSubmit","orderData","items","createOrder","subscribe","response","alert","orderId","navigate","error","console","ɵɵdirectiveInject","i1","ApiService","i2","Router","i3","CartService","selectors","decls","vars","consts","template","CheckoutComponent_Template","rf","ctx","CheckoutComponent_div_9_Template","CheckoutComponent_div_10_Template","CheckoutComponent_Template_form_ngSubmit_15_listener","length"],"sources":["C:\\Users\\Usuario de Windows\\Downloads\\Final-Aplicaciones-Web-main\\Final-Aplicaciones-Web-main\\frontend\\src\\app\\components\\checkout\\checkout.component.ts","C:\\Users\\Usuario de Windows\\Downloads\\Final-Aplicaciones-Web-main\\Final-Aplicaciones-Web-main\\frontend\\src\\app\\components\\checkout\\checkout.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../../services/api.service';\nimport { CartService } from '../../services/cart.service';\n\n@Component({\n    selector: 'app-checkout',\n    templateUrl: './checkout.component.html',\n    styleUrls: ['./checkout.component.css']\n})\nexport class CheckoutComponent implements OnInit {\n    userId = 1; // Hardcoded user ID for demo purposes (assuming user is logged in)\n    cartItems: any[] = [];\n    total = 0;\n\n    constructor(private apiService: ApiService, private router: Router, private cartService: CartService) { }\n\n    ngOnInit(): void {\n        this.cartItems = this.cartService.getCartItems();\n        this.calculateTotal();\n    }\n\n    calculateTotal() {\n        this.total = this.cartService.getTotal();\n    }\n\n    updateQuantity(item: any, event: any) {\n        const newQuantity = parseInt(event.target.value, 10);\n        if (newQuantity > 0) {\n            this.cartService.updateQuantity(item.id, newQuantity);\n        } else {\n            this.removeFromCart(item);\n        }\n        this.calculateTotal();\n    }\n\n    increaseQuantity(item: any) {\n        this.cartService.updateQuantity(item.id, item.quantity + 1);\n        this.calculateTotal();\n    }\n\n    decreaseQuantity(item: any) {\n        if (item.quantity > 1) {\n            this.cartService.updateQuantity(item.id, item.quantity - 1);\n        } else {\n            this.removeFromCart(item);\n        }\n        this.calculateTotal();\n    }\n\n    removeFromCart(item: any) {\n        if (confirm('¿Estás segura de que quieres eliminar este artículo?')) {\n            this.cartService.removeFromCart(item.id);\n            this.cartItems = this.cartService.getCartItems(); // Refresh local list\n            this.calculateTotal();\n        }\n    }\n\n    onSubmit() {\n        const orderData = {\n            userId: this.userId,\n            items: this.cartItems,\n            total: this.total\n        };\n\n        this.apiService.createOrder(orderData).subscribe(\n            (response) => {\n                alert('¡Pedido realizado con éxito! ID: ' + response.orderId);\n                this.cartItems = [];\n                this.total = 0;\n                this.router.navigate(['/']);\n            },\n            (error) => {\n                console.error(error);\n                alert('Error al procesar el pedido.');\n            }\n        );\n    }\n}\n","<div class=\"container my-5\">\n    <div class=\"row justify-content-center\">\n        <div class=\"col-lg-8\">\n            <h2 class=\"mb-4 fw-bold gradient-text\">Finalizar Compra</h2>\n\n            <div class=\"checkout-card card border-0 shadow-lg mb-4\">\n                <div class=\"card-body p-4\">\n                    <h5 class=\"fw-bold mb-4\">Resumen del Pedido</h5>\n\n                    <div *ngIf=\"cartItems.length === 0\" class=\"text-center py-5\">\n                        <i class=\"fas fa-shopping-basket fa-3x text-muted mb-3\"></i>\n                        <h5 class=\"text-muted\">Tu carrito está vacío</h5>\n                        <p class=\"mb-4\">¡Explora nuestro catálogo y encuentra tu vestido ideal!</p>\n                        <a routerLink=\"/catalog\" class=\"btn btn-primary\">\n                            Seguir Comprando\n                        </a>\n                    </div>\n\n                    <div *ngIf=\"cartItems.length > 0\">\n                        <div class=\"order-items\">\n                            <div class=\"order-item\" *ngFor=\"let item of cartItems\">\n                                <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                                    <div class=\"flex-grow-1\">\n                                        <strong>{{ item.name }}</strong>\n                                    </div>\n                                    <div class=\"mx-2\">\n                                        <input type=\"number\" class=\"form-control\" style=\"width: 60px;\"\n                                            [(ngModel)]=\"item.quantity\" (change)=\"updateQuantity(item, $event)\"\n                                            min=\"1\" />\n                                    </div>\n                                    <div class=\"text-end\" style=\"width: 80px;\">\n                                        ${{ item.price * item.quantity | number:'1.2-2' }}\n                                    </div>\n                                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger ms-2\"\n                                        (click)=\"removeFromCart(item)\"><i class=\"fas fa-trash-alt\"></i></button>\n                                </div>\n                            </div>\n                            <div class=\"total-section mt-4 pt-4 border-top\">\n                                <div class=\"d-flex justify-content-between align-items-center\">\n                                    <h4 class=\"fw-bold\">Total:</h4>\n                                    <h3 class=\"price-total\">${{ total }}</h3>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"checkout-card card border-0 shadow-lg\">\n                    <div class=\"card-body p-4\">\n                        <h5 class=\"fw-bold mb-4\">Información de Envío</h5>\n                        <form (ngSubmit)=\"onSubmit()\">\n                            <div class=\"mb-3\">\n                                <label class=\"form-label fw-semibold\">Nombre Completo</label>\n                                <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"Ej: María García\"\n                                    required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label class=\"form-label fw-semibold\">Dirección</label>\n                                <input type=\"text\" class=\"form-control form-control-lg\"\n                                    placeholder=\"Calle, número, colonia\" required>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6 mb-3\">\n                                    <label class=\"form-label fw-semibold\">Ciudad</label>\n                                    <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"Ciudad\"\n                                        required>\n                                </div>\n                                <div class=\"col-md-6 mb-3\">\n                                    <label class=\"form-label fw-semibold\">Código Postal</label>\n                                    <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"12345\"\n                                        required>\n                                </div>\n                            </div>\n                            <div class=\"mb-4\">\n                                <label class=\"form-label fw-semibold\">Teléfono</label>\n                                <input type=\"tel\" class=\"form-control form-control-lg\" placeholder=\"(123) 456-7890\"\n                                    required>\n                            </div>\n                            <button type=\"submit\" class=\"btn btn-primary btn-lg w-100\">\n                                Confirmar Pedido\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}